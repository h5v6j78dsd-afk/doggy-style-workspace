{
  "id": "rechnung",
  "title": "Rechnung",
  "type": "rechnung",
  "version": "1.0",
  "taxRate": 0.19,

  "sections": [
    {
      "id": "kunde",
      "title": "Kunde",
      "fields": [
        { "id": "kunde_name", "label": "Name Kunde", "type": "text", "required": true },
        { "id": "kunde_adresse", "label": "Adresse", "type": "textarea" },
        { "id": "kunde_email", "label": "E-Mail", "type": "text" }
      ]
    },

    {
      "id": "hund",
      "title": "Hund (optional)",
      "fields": [
        { "id": "hund_name", "label": "Name Hund", "type": "text" }
      ]
    },

    {
      "id": "leistungen",
      "title": "Leistungen / Positionen",
      "repeatable": true,
      "fields": [
        {
          "id": "beschreibung",
          "label": "Leistung / Position",
          "type": "text",
          "required": true
        },
        {
          "id": "menge",
          "label": "Menge",
          "type": "number",
          "default": 1
        },
        {
          "id": "einzelpreis",
          "label": "Einzelpreis (€)",
          "type": "number",
          "required": true
        }
      ]
    },

    {
      "id": "zuschlaege",
      "title": "Zuschläge (z. B. Spaziergänge)",
      "repeatable": true,
      "fields": [
        {
          "id": "zuschlag_name",
          "label": "Zuschlag",
          "type": "text"
        },
        {
          "id": "menge",
          "label": "Anzahl",
          "type": "number",
          "default": 1
        },
        {
          "id": "preis",
          "label": "Preis pro Einheit (€)",
          "type": "number"
        }
      ]
    },

    {
      "id": "zusammenfassung",
      "title": "Rechnungssumme",
      "readonly": true,
      "fields": [
        {
          "id": "netto",
          "label": "Netto (€)",
          "type": "calculated",
          "formula": "sum(leistungen.menge * leistungen.einzelpreis) + sum(zuschlaege.menge * zuschlaege.preis)"
        },
        {
          "id": "mwst",
          "label": "MwSt 19 % (€)",
          "type": "calculated",
          "formula": "netto * 0.19"
        },
        {
          "id": "brutto",
          "label": "Brutto (€)",
          "type": "calculated",
          "formula": "netto + mwst"
        }
      ]
    },

    {
      "id": "hinweise",
      "title": "Hinweise",
      "fields": [
        {
          "id": "zahlungsbedingung",
          "label": "Zahlungshinweis",
          "type": "textarea",
          "default": "Der Rechnungsbetrag ist vor Betreuungsbeginn zu überweisen."
        }
      ]
    }
  ]
}